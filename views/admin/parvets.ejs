<% layout("layouts/boilerplate") %>

 <!-- PAGE CONTAINER -->
  <div class="max-w-7xl mx-auto px-4 py-6">

    <!-- HEADER -->
    <div class="flex flex-col md:flex-row md:items-center md:justify-between mb-6 gap-4">
      <div>
        <h1 class="text-2xl font-bold text-gray-800">Paravets Management</h1>
        <p class="text-sm text-gray-500">
          Total Paravets: <span class="font-medium text-gray-700"><%= totalCount %></span>
        </p>
      </div>

      <!-- ADD BUTTON -->
      <a href="/admin/paravets/new"
        class="inline-flex items-center justify-center px-4 py-2 rounded-md bg-blue-600 text-white text-sm font-medium hover:bg-blue-700 transition">
        + Add New Paravet
      </a>
    </div>

    <!-- TABLE CARD -->
    <div class="bg-white rounded-lg shadow overflow-x-auto">
      <table class="min-w-full border-collapse">
        <thead class="bg-gray-50">
          <tr>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">#</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Name</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Email</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Mobile</th>
            <th class="px-4 py-3 text-left text-xs font-semibold text-gray-600 uppercase">Created</th>
            <th class="px-4 py-3 text-center text-xs font-semibold text-gray-600 uppercase">Action</th>
          </tr>
        </thead>

        <tbody class="divide-y">
          <% if (paravets.length === 0) { %>
            <tr>
              <td colspan="6" class="px-4 py-6 text-center text-gray-500">
                No paravets found.
              </td>
            </tr>
          <% } %>

          <% paravets.forEach((paravet, index) => { %>
            <tr class="hover:bg-gray-50">
              <td class="px-4 py-3 text-sm text-gray-700">
                <%= (currentPage - 1) * limit + index + 1 %>
              </td>

              <td class="px-4 py-3 text-sm font-medium text-gray-800">
                <%= paravet.user?.name || "N/A" %>
              </td>

              <td class="px-4 py-3 text-sm text-gray-600">
                <%= paravet.user?.email || "N/A" %>
              </td>

              <td class="px-4 py-3 text-sm text-gray-600">
                <%= paravet.user?.mobile || "N/A" %>
              </td>

              <td class="px-4 py-3 text-sm text-gray-500">
                <%= new Date(paravet.createdAt).toLocaleDateString() %>
              </td>

              <td class="px-4 py-3 text-center">
                <a href="/admin/paravets/<%= paravet._id %>"
                  class="inline-block px-3 py-1 rounded-md text-xs font-medium bg-green-100 text-green-700 hover:bg-green-200 transition">
                  View
                </a>
              </td>
            </tr>
          <% }) %>
        </tbody>
      </table>
    </div>

    <!-- PAGINATION -->
    <% if (totalPages > 1) { %>
      <div class="flex flex-wrap justify-center mt-6 gap-2">

        <!-- PREVIOUS -->
        <% if (currentPage > 1) { %>
          <a href="?page=<%= currentPage - 1 %>"
            class="px-3 py-1 rounded-md bg-white border text-sm hover:bg-gray-100">
            Prev
          </a>
        <% } %>

        <!-- PAGE NUMBERS -->
        <% for (let i = 1; i <= totalPages; i++) { %>
          <a href="?page=<%= i %>"
            class="px-3 py-1 rounded-md text-sm
            <%= i === currentPage
              ? 'bg-blue-600 text-white'
              : 'bg-white border hover:bg-gray-100' %>">
            <%= i %>
          </a>
        <% } %>

        <!-- NEXT -->
        <% if (currentPage < totalPages) { %>
          <a href="?page=<%= currentPage + 1 %>"
            class="px-3 py-1 rounded-md bg-white border text-sm hover:bg-gray-100">
            Next
          </a>
        <% } %>

      </div>
    <% } %>

  </div>