<% layout("layouts/boilerplate") %>

<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-6">

  <!-- Header -->
  <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-6 space-y-3 md:space-y-0">
    <div>
      <h1 class="text-2xl font-bold text-gray-800">Animal Details</h1>
      <p class="text-sm text-gray-500 mt-1">Details for <span class="font-semibold"><%= animal.name || "Unnamed" %></span></p>
    </div>
    <a href="/admin/animals" class="inline-flex items-center px-4 py-2 bg-gray-200 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-300 transition">
      Back to Animals
    </a>
  </div>

  <!-- Photos -->
  <div class="grid grid-cols-2 sm:grid-cols-4 gap-4 mb-6">
    <% ["front", "left", "right", "back"].forEach(side => { %>
      <div class="bg-gray-100 rounded-lg overflow-hidden shadow-sm">
        <% if (animal.photos[side]?.url) { %>
          <img src="<%= animal.photos[side].url %>" alt="<%= side %> photo" class="w-full h-32 object-cover">
        <% } else { %>
          <div class="w-full h-32 flex items-center justify-center text-gray-400 text-xs">No <%= side %> photo</div>
        <% } %>
        <p class="text-center text-xs text-gray-500 py-1 capitalize"><%= side %></p>
      </div>
    <% }) %>
  </div>

  <!-- Animal Info -->
  <div class="bg-white shadow rounded-lg p-6 mb-6">
    <h2 class="text-lg font-semibold text-gray-700 mb-4">Animal Information</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <p class="text-gray-500 text-sm">Unique ID</p>
        <p class="text-gray-800 font-medium"><%= animal.uniqueAnimalId %></p>
      </div>
      <div>
        <p class="text-gray-500 text-sm">Name</p>
        <p class="text-gray-800 font-medium"><%= animal.name || "Unnamed" %></p>
      </div>
      <div>
        <p class="text-gray-500 text-sm">Type</p>
        <p class="text-gray-800 font-medium"><%= animal.animalType %></p>
      </div>
      <div>
        <p class="text-gray-500 text-sm">Breed</p>
        <p class="text-gray-800 font-medium"><%= animal.breed || "N/A" %></p>
      </div>
      <div>
        <p class="text-gray-500 text-sm">Gender</p>
        <p class="text-gray-800 font-medium"><%= animal.gender || "Unknown" %></p>
      </div>
      <div>
        <p class="text-gray-500 text-sm">Age</p>
        <p class="text-gray-800 font-medium"><%= animal.age?.value ? animal.age.value + " " + animal.age.unit : "N/A" %></p>
      </div>
      <div>
        <p class="text-gray-500 text-sm">Status</p>
        <p class="font-medium">
          <% if (animal.isActive) { %>
            <span class="inline-block px-2 py-1 text-xs font-medium text-green-800 bg-green-100 rounded-full">Active</span>
          <% } else { %>
            <span class="inline-block px-2 py-1 text-xs font-medium text-red-800 bg-red-100 rounded-full">Inactive</span>
          <% } %>
        </p>
      </div>
      <div>
        <p class="text-gray-500 text-sm">Health Status</p>
        <p class="text-gray-800 font-medium"><%= animal.healthStatus %></p>
      </div>
    </div>
  </div>

  <!-- Farmer Info -->
  <div class="bg-white shadow rounded-lg p-6 mb-6">
    <h2 class="text-lg font-semibold text-gray-700 mb-4">Farmer Information</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <p class="text-gray-500 text-sm">Name</p>
        <p class="text-gray-800 font-medium"><%= animal.farmer?.name || "N/A" %></p>
      </div>
      <div>
        <p class="text-gray-500 text-sm">Mobile</p>
        <p class="text-gray-800 font-medium"><%= animal.farmer?.mobile || "N/A" %></p>
      </div>
      <div class="sm:col-span-2">
        <p class="text-gray-500 text-sm">Address</p>
        <p class="text-gray-800 font-medium"><%= animal.farmer?.address || "N/A" %></p>
      </div>
    </div>
  </div>

  <!-- Lactation Info (if applicable) -->
  <% if (animal.lactationStatus?.isLactating || animal.lactationStatus?.lastCalvingDate) { %>
    <div class="bg-white shadow rounded-lg p-6 mb-6">
      <h2 class="text-lg font-semibold text-gray-700 mb-4">Lactation Information</h2>
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
        <div>
          <p class="text-gray-500 text-sm">Currently Lactating</p>
          <p class="text-gray-800 font-medium"><%= animal.lactationStatus.isLactating ? "Yes" : "No" %></p>
        </div>
        <div>
          <p class="text-gray-500 text-sm">Last Calving Date</p>
          <p class="text-gray-800 font-medium"><%= animal.lactationStatus.lastCalvingDate ? new Date(animal.lactationStatus.lastCalvingDate).toLocaleDateString() : "N/A" %></p>
        </div>
        <div>
          <p class="text-gray-500 text-sm">Daily Yield</p>
          <p class="text-gray-800 font-medium"><%= animal.lactationStatus.dailyYield ? animal.lactationStatus.dailyYield + " " + (animal.lactationStatus.yieldUnit || "") : "N/A" %></p>
        </div>
      </div>
    </div>
  <% } %>

  <!-- Registered By -->
  <div class="bg-white shadow rounded-lg p-6">
    <h2 class="text-lg font-semibold text-gray-700 mb-4">Registered By</h2>
    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
      <div>
        <p class="text-gray-500 text-sm">Name</p>
        <p class="text-gray-800 font-medium"><%= animal.registeredBy?.name || "N/A" %></p>
      </div>
      <div>
        <p class="text-gray-500 text-sm">Email</p>
        <p class="text-gray-800 font-medium"><%= animal.registeredBy?.email || "N/A" %></p>
      </div>
    </div>
  </div>

</div>
